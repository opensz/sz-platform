String.prototype.toDate=function(p){pattern=p.replace(/(yyyy)/g,"([0-9]{4})").replace(/(yy)|(MM)|(dd)|(hh)|(mm)|(ss)/g,"([0-9]{2})").replace(/[Mdhms]/g,"([0-9]{1,2})");getIndex=function(s,m){var i=p.indexOf(s);if(i==-1){i=p.indexOf(m)}return i};var l=new Date();var a;if(new RegExp(pattern).test(this)){var b=getIndex("yyyy","yy");var d=getIndex("MM","M");var k=getIndex("dd","d");var h=getIndex("hh","h");var q=getIndex("mm","m");var o=getIndex("ss","s");var f={y:0,m:0,d:0,h:0,mi:0,s:0};var n=new Array(b+",y",d+",m",k+",d",h+",h",q+",mi",o+",s").sort(function(m,i){m=parseInt(m.split(",")[0]);i=parseInt(i.split(",")[0]);return m>i});var r=0;var j=new Array();for(var e=0;e<n.length;e++){if(parseInt(n[e].split(",")[0])!=-1){j[r]=n[e];r++}}var c=this.match(pattern);for(var e=1;e<c.length;e++){if(e==0){return}var g=j[e-1].split(",")[1];f[g]=c[e]}f.y=f.y||l.getFullYear();f.d=f.d||l.getDate();if(f.y.toString().length==2){f.y=parseInt("20"+f.y)}f.m-=1;a=new Date(f.y,f.m,f.d,f.h,f.mi,f.s)}return a};function checkDateFormat(d,e){var f;var c="yyyy-MM-dd";if(e=="yyyy-MM-dd hh:mm"){f="\u60a8\u8f93\u5165\u7684\u65e5\u671f\u683c\u5f0f\u6709\u8bef\uff0c\u8bf7\u6309 yyyy-MM-dd hh:mm \u7684\u683c\u5f0f\u91cd\u65b0\u8f93\u5165\uff01"}else{if(e=="yyyy-MM-dd"){f="\u60a8\u8f93\u5165\u7684\u65e5\u671f\u683c\u5f0f\u6709\u8bef\uff0c\u8bf7\u6309 yyyy-MM-dd \u7684\u683c\u5f0f\u91cd\u65b0\u8f93\u5165\uff01"}else{if(e=="yyyy-MM"){f="\u60a8\u8f93\u5165\u7684\u65e5\u671f\u683c\u5f0f\u6709\u8bef\uff0c\u8bf7\u6309 yyyy-MM \u7684\u683c\u5f0f\u91cd\u65b0\u8f93\u5165\uff01"}}}var a=d.value;if(a==""){return true}else{var b=a.toDate(e);if(b==undefined){alert(f);d.value="";return false}else{if(e=="yyyy-MM-dd hh:mm"){c="yyyy-MM-dd HH:mm"}else{if(e=="yyyy-MM"){c="yyyy-MM"}}d.value=b.format(c);return true}}}function datecompare(k,f,m,e){var p;var n;var a="yyyy-MM-dd";if(m=="yyyy-MM-dd hh:mm"){p="\u60a8\u8f93\u5165\u7684\u65e5\u671f\u683c\u5f0f\u6709\u8bef\uff0c\u8bf7\u6309 yyyy-MM-dd hh:mm \u7684\u683c\u5f0f\u91cd\u65b0\u8f93\u5165\uff01"}else{if(m=="yyyy-MM-dd"){p="\u60a8\u8f93\u5165\u7684\u65e5\u671f\u683c\u5f0f\u6709\u8bef\uff0c\u8bf7\u6309 yyyy-MM-dd \u7684\u683c\u5f0f\u91cd\u65b0\u8f93\u5165\uff01"}else{if(m=="yyyy-MM"){p="\u60a8\u8f93\u5165\u7684\u65e5\u671f\u683c\u5f0f\u6709\u8bef\uff0c\u8bf7\u6309 yyyy-MM \u7684\u683c\u5f0f\u91cd\u65b0\u8f93\u5165\uff01"}}}var l=document.getElementById(k);var h=document.getElementById(f);var c="";var q="";if(l!=null&&l!="null"){c=l.value}if(h!=null&&h!="null"){q=h.value}if(c==""){}else{var g=c.toDate(m);if(g==undefined){alert(p);document.getElementById(k).value="";return false}else{if(m=="yyyy-MM-dd hh:mm"){a="yyyy-MM-dd HH:mm"}else{if(m=="yyyy-MM"){a="yyyy-MM"}}document.getElementById(k).value=g.format(a)}}if(q==""){}else{var d=q.toDate(m);if(d==undefined){alert(p);document.getElementById(f).value="";return false}else{if(m=="yyyy-MM-dd hh:mm"){a="yyyy-MM-dd HH:mm"}else{if(m=="yyyy-MM"){a="yyyy-MM"}}document.getElementById(f).value=d.format(a)}}switch(e){case"ddlk":n="\u5230\u8fbe\u65f6\u95f4\u4e0d\u80fd\u665a\u4e8e\u79bb\u5f00\u65f6\u95f4";break;case"qqxy":n="\u8bf7\u6c42\u65f6\u95f4\u4e0d\u80fd\u665a\u4e8e\u54cd\u5e94\u65f6\u95f4";break;case"qygq":n="\u542f\u7528\u65e5\u671f\u4e0d\u80fd\u665a\u4e8e\u8fc7\u671f\u65e5\u671f";break;case"qswc":n="\u5f00\u59cb\u5904\u7406\u65f6\u95f4\u4e0d\u80fd\u665a\u4e8e\u671f\u671b\u5b8c\u6210\u65f6\u95f4";break;case"qsjz":n="\u8d77\u59cb\u65e5\u671f\u4e0d\u80fd\u665a\u4e8e\u622a\u81f3\u65e5\u671f";break;case"qszz":n="\u7edf\u8ba1\u8d77\u59cb\u65f6\u95f4\u4e0d\u80fd\u665a\u4e8e\u7edf\u8ba1\u7ec8\u6b62\u65f6\u95f4";break;case"sxsx":n="\u751f\u6548\u65e5\u671f\u4e0d\u80fd\u665a\u4e8e\u5931\u6548\u65e5\u671f";break;default:n="\u4ee3\u7406\u8d77\u59cb\u65f6\u95f4\u4e0d\u80fd\u665a\u4e8e\u4ee3\u7406\u7ed3\u675f\u65f6\u95f4"}var j=document.getElementById(k);var i=document.getElementById(f);if(j!=null&&j!="null"){c=j.value}if(i!=null&&i!="null"){q=i.value}if(c.length==7&&q.length==7){var b=c.split("-");var o=q.split("-");if(b[0]>o[0]){alert(n);document.getElementById(f).select();return false}if(b[0]==o[0]){if(b[1]>o[1]){alert(n);document.getElementById(f).select();return false}}return true}if(c.length>0&&q.length>0){c=new Date(Date.parse(c.replace(/-/g,"/")));q=new Date(Date.parse(q.replace(/-/g,"/")));if(c>q){alert(n);document.getElementById(f).select();return false}return true}return true};